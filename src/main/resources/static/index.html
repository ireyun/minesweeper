<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>扫雷游戏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 登录/注册区域 -->
        <div id="auth-section" class="auth-section">
            <h1>扫雷游戏</h1>
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="showLogin()">登录</button>
                <button class="tab-btn" onclick="showRegister()">注册</button>
            </div>
            
            <!-- 登录表单 -->
            <div id="login-form" class="auth-form">
                <input type="text" id="login-username" placeholder="用户名" required>
                <input type="password" id="login-password" placeholder="密码" required>
                <button onclick="login()">登录</button>
                <p id="login-error" class="error-message"></p>
            </div>
            
            <!-- 注册表单 -->
            <div id="register-form" class="auth-form" style="display: none;">
                <input type="text" id="register-username" placeholder="用户名" required>
                <input type="password" id="register-password" placeholder="密码" required>
                <input type="email" id="register-email" placeholder="邮箱（可选）">
                <button onclick="register()">注册</button>
                <p id="register-error" class="error-message"></p>
            </div>
        </div>

        <!-- 房间选择区域 -->
        <div id="room-section" class="room-section" style="display: none;">
            <div class="room-header">
                <div class="user-info">
                    <span id="username-display"></span>
                    <button onclick="logout()" class="logout-btn">退出</button>
                </div>
            </div>

            <div class="room-main">
                <div class="room-options">
                    <button onclick="showCreateRoomDialog()" class="btn-primary btn-large">创建房间</button>
                    <button onclick="showJoinRoomList()" class="btn-primary btn-large">加入房间</button>
                </div>

                <!-- 创建房间对话框 -->
                <div id="create-room-dialog" class="dialog" style="display: none;">
                    <div class="dialog-content">
                        <h2>创建房间</h2>
                        <label>房间名称: <input type="text" id="room-name" placeholder="房间名称" value="我的房间"></label>
                        <label>最大人数: <input type="number" id="room-max-players" value="4" min="2" max="10"></label>
                        <label>游戏宽度: <input type="number" id="room-game-width" value="10" min="5" max="50"></label>
                        <label>游戏高度: <input type="number" id="room-game-height" value="10" min="5" max="50"></label>
                        <label>地雷数: <input type="number" id="room-game-mines" value="15" min="1"></label>
                        <label>难度:
                            <select id="room-game-difficulty">
                                <option value="EASY">简单</option>
                                <option value="MEDIUM">中等</option>
                                <option value="HARD">困难</option>
                                <option value="CUSTOM">自定义</option>
                            </select>
                        </label>
                        <div class="dialog-buttons">
                            <button onclick="createRoomWithGame()" class="btn-primary">创建房间并开始游戏</button>
                            <button onclick="hideCreateRoomDialog()" class="btn-secondary">取消</button>
                        </div>
                    </div>
                </div>

                <!-- 房间列表 -->
                <div id="room-list-section" class="room-list-section" style="display: none;">
                    <div class="room-list-header">
                        <h2>房间列表</h2>
                        <button onclick="refreshRoomList()" class="btn-secondary">刷新</button>
                        <button onclick="hideJoinRoomList()" class="btn-secondary">返回</button>
                    </div>
                    <div id="room-list" class="room-list"></div>
                </div>
            </div>
        </div>

        <!-- 游戏区域 -->
        <div id="game-section" class="game-section" style="display: none;">
            <div class="game-header">
                <div class="user-info">
                    <span id="game-username-display"></span>
                    <button onclick="backToRoom()" class="btn-secondary">返回房间</button>
                    <button onclick="logout()" class="logout-btn">退出</button>
                </div>
            </div>


            <!-- 游戏信息 -->
            <div id="game-info" class="game-info" style="display: none;">
                <div class="info-item">
                    <span>状态: </span>
                    <span id="game-status">-</span>
                </div>
                <div class="info-item">
                    <span>时间: </span>
                    <span id="game-time">0</span>秒
                </div>
                <div class="info-item">
                    <span>地雷: </span>
                    <span id="game-mines-count">-</span>
                </div>
                <div class="game-actions">
                    <button onclick="pauseGame()" id="pause-btn" class="btn-secondary">暂停</button>
                    <button onclick="resumeGame()" id="resume-btn" class="btn-secondary" style="display: none;">继续</button>
                    <button onclick="restartGame()" class="btn-secondary">重启</button>
                    <button onclick="surrenderGame()" class="btn-danger">放弃</button>
                </div>
            </div>

            <!-- 游戏棋盘 -->
            <div id="game-board-container" class="game-board-container">
                <div id="game-board" class="game-board"></div>
            </div>

            <!-- 游戏消息 -->
            <div id="game-message" class="game-message"></div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/game.js"></script>
    <script src="js/room.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

